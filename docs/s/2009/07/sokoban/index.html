<!DOCTYPE html>
<html lang="en"> 
<head>

<title>Sōkoban &mdash; Borgar.net</title>

<meta charset=UTF-8>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="format-detection" content="telephone=no">

<link rel="start" href="/" title="Borgar.net"> 
<link rel="index" href="/" title='Borgar.net'>

<!--
<meta property="og:site_name" content="Borgar.net" />
<meta property="og:type" content="website" />
<meta property="og:title" content="..." />
<meta property="og:image" content="foo.jpg" />
 -->

<link rel="stylesheet" href="/theme/style.css">

<link rel="alternate feed" type="application/rss+xml"  href="/feed/">
<link rel="alternate feed" type="application/atom+xml" href="/feed/atom/">

<script>
document.write(unescape('%3Cscript src="/theme/codecolor.js"%3E%3C/script%3E'));
</script>

<!-- OpenID --> 
<link rel="openid.server" href="http://pip.verisignlabs.com/server" />
<link rel="openid.delegate" href="http://borgar.pip.verisignlabs.com" />
<link rel="openid2.provider" href="http://pip.verisignlabs.com/server" />
<link rel="openid2.local_id" href="http://borgar.pip.verisignlabs.com" />
<meta http-equiv="X-XRDS-Location" content="http://pip.verisignlabs.com/user/borgar/yadisxrds" />

</head>
<body class="single">
<div id="top">

<header>
<h1><a href="/" rel="home">Borgar.net</a></h1>
<small class="aux">&mdash; Go straight to <a href="#pages">page navigation</a></small>
<hr class="aux"> 
</header> 

<section id="main">




<p class="date">
  <a href="/s/archives/#dated-2009-07-13">13. July 2009</a>
</p>

<article id="sokoban" lang="en">

  <h1><a href="/s/2009/07/sokoban/" rel="bookmark">Sōkoban</a></h1>

  <p>A few days without internet do strange things to a computer addict. In my case I start to rummage frenetically though old projects to see if there is anything I can finish, polish, or do something with that doesn&#39;t require internet access.</p>
<p><img src="/files/sokoban.png" alt="sokoban" title="Sokoban for windows"></p>
<p>So I found my old Sokoban game. Originally a Windows application, I though it could be fun to try to remake it in JavaScript. <a href="/programs/sokoban/" title="Sokoban in jQuery">So that&#39;s what I did.</a></p>
<p>I wrote the bulk of it in about an evening, and spent a few more evenings applying spit and polish until I was satisfied that it worked the way I wanted. The <a href="https://github.com/borgar/jquery-sokoban/blob/master/js/jquery.sokoban.js">whole thing</a> is about  300 lines of mostly uncommented code running on top of jQuery — well, actually as a jQuery plugin.</p>
<h3>The interresting bits</h3>
<p>There are a few characteristics that make this implementation interesting. The first is that the game uses progressive enhancement methodology. The script runs through marked items on the webpage and makes valid Sokoban levels playable. If you don&#39;t have JavaScript you can still read the level codes, which are normally written in a standard like this:</p>
<pre><code>####
# .#
#  ###
#*@  #
#  $ #
#  ###
####
</code></pre>
<p>The <code>@</code> is the worker, <code>#</code> are walls, <code>.</code> are docks, <code>$</code> are boxes, and so on... </p>
<p>The symbols are image-replaced with CSS when the level is live, but the whole thing works without CSS. You can disable the styles if you desire to play the levels in pure ASCII.</p>
<p>This also means that the game is printable. At any moment in gameplay you can grab a hardcopy of your status and frame it. I am hard pressed to think of other printable games. Copying the level onto the clipboard also works just as it would any other text. Not really useful features for a game, but interesting side-effects nonetheless.</p>
<p>Because parsing all the levels immediately as the game loads up — especially on level collections that have very many levels — is quite labour intensive, I am applying a recent jQuery plugin of mine, <a href="https://github.com/borgar/jquery-processeach">.processEach()</a>, to prevent the browser from locking up. In short, it works like <em>.each()</em> but yields the process every iteration to allow the browser some time to do other things. It&#39;s perhaps a subject of another entry.</p>
<h3>Have fun</h3>
<p>Have fun with <a href="/programs/sokoban/" title="Sokoban in jQuery">the game</a> and the source (which are released under the GPL v3). I suspect that it might one day be exactly what a Sokoban level blog is looking for, but for now it mostly remains a curiosity rather than a spectacular reproduction of the game,</p>


  <section class="meta">

    <small class="time">
      <b>Published:</b>
      <a href="/s/2009/07/sokoban/" rel="bookmark">13. July 2009</a><i>.</i>
    </small>
    
    <small class="tags">
      <b>Tagged:</b>
      <a rel="tag" href="/s/tagged/game/">game</a><i>,</i>
      <a rel="tag" href="/s/tagged/javascript/">javascript</a><i>,</i>
      <a rel="tag" href="/s/tagged/programming/">programming</a><i>,</i>
      <a rel="tag" href="/s/tagged/release/">release</a><i>.</i>
    </small>

    
    
  </section>

</article>



<nav id="pager">
  <a rel="next" href="/s/2009/08/css-target/" title="CSS :target">Newer entry <i>&rarr;</i></a>
  <a rel="prev" href="/s/2009/07/gecko-and-webkit/" title="Gecko &amp; Webkit"><i>&larr;</i> Older entry</a>
</nav>



<hr class="aux">
</section>


<footer>

<nav id="pages">
<h1>Other pages on Borgar.net</h1>
<ul>

<li><a href="/s/archives/">Archives</a></li>


<li><a href="/borgar/">About Borgar</a></li>


<li><a href="/software/">Software</a></li>

</ul>
<hr class="aux">
</nav>

<p id="license">
<a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/3.0/"><img src="/theme/cc.png"></a> 
<span>This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/3.0/">Creative Commons - Attribution - NonCommercial - NoDerivs - 3.0 License</a>.</span>
</p>

</footer>

</div>


<script> 
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js'%3E%3C/script%3E"));
</script> 
<script>
try {
var pageTracker = _gat._getTracker("UA-680642-1");
pageTracker._trackPageview();
} catch(err) {}
</script> 


</body> 
</html>
